"use strict";
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var dotenv = __importStar(require("dotenv"));
var ipinfoWrapper_1 = __importDefault(require("../ipinfoWrapper"));
var ipinfoWrapper;
beforeEach(function () {
    dotenv.config();
    var token = process.env.IPINFO_TOKEN || "token";
    ipinfoWrapper = new ipinfoWrapper_1.default(token);
});
describe("IPinfoWrapper", function () {
    var ip = "8.8.8.8";
    var asn = "AS7922";
    test("lookupIp", function () {
        expect.assertions(10);
        return ipinfoWrapper.lookupIp(ip)
            .then(function (data) {
            expect(data.ip).toEqual("8.8.8.8");
            expect(data.hostname).toEqual("google-public-dns-a.google.com");
            expect(data.city).toEqual("Mountain View");
            expect(data.region).toEqual("California");
            expect(data.countryCode).toEqual("US");
            expect(data.country).toEqual("United States");
            expect(data.loc).toEqual("37.3860,-122.0840");
            expect(data.phone).toEqual("650");
            expect(data.asn).toEqual({ asn: "AS15169", name: "Google LLC", domain: "google.com", route: "8.8.8.0/24", type: "hosting" });
            expect(data.company).toEqual({ name: "Google LLC", domain: "google.com", type: "hosting" });
        });
    });
    test("lookupASN", function () {
        expect.assertions(8);
        return ipinfoWrapper.lookupASN(asn)
            .then(function (data) {
            expect(data.asn).toEqual("AS7922");
            expect(data.name).toEqual("Comcast Cable Communications, LLC");
            expect(data.country).toEqual("United States");
            expect(data.countryCode).toEqual("US");
            expect(data.allocated).toEqual("1997-02-14");
            expect(data.registry).toEqual("arin");
            expect(data.domain).toEqual("comcast.net");
            expect(data.num_ips).toEqual(71230208);
        });
    });
});
